<div class="top-nav">
  <div class="search-icon">
    <button data-toggle="collapse" data-target="#new_employee_and_location_search" aria-expanded="true" aria-controls="search-form">
      <span class="oi oi-magnifying-glass"></span>
    </button>
  </div>

  <%= form_for EmployeeAndLocationSearch.new(search_params),
    method: :get,
    url: search_path,
    html: { class: "collapse show width" } do |f|
  %>
    <div>
      <%= f.text_field :query, label: false%>
    </div>
  <% end %>

  <ul class="top-nav-list">
    <%= content_tag(:li, class: active?(after_sign_in_path_for(current_user))) do %>
      <%= link_to after_sign_in_path_for(current_user) do %>
        <%= t(".calendar") %>
      <% end %>
    <% end %>

    <%= content_tag(:li, class: active?(locations_path)) do %>
      <%= link_to locations_path do %>
        <%= t(".locations") %>
      <% end %>
    <% end %>

    <%= content_tag(:li, class: active?(business_users_path)) do %>
      <%= link_to business_users_path do %>
        <%= t(".employees") %>
      <% end %>
    <% end %>

    <% if policy(:settings).show? %>
      <%= content_tag(:li, class: active?(settings_path)) do %>
        <%= link_to settings_path do %>
          <%= t(".settings") %>
        <% end %>
      <% end %>
    <% end %>
  </ul>

  <div id="profile-button" class="dropdown">
    <section data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="oi oi-person"></span>
    </section>

    <div class="right">
      <%= link_to t(".profile"), edit_user_path %>
      <%= link_to t(".logout"), destroy_user_session_path, method: :delete %>
    </div>
  </div>

  <button type="button" data-toggle="collapse" data-target="#mobile-menu" aria-expanded="false">
    <span class="oi oi-menu"></span>
  </button>
</div>

<div class="collapse navbar-collapse" id="mobile-menu">
  <ul>
    <li>
      <%= link_to t(".calendar"), after_sign_in_path_for(current_user) %>
    </li>

    <li>
      <%= link_to t(".locations"), locations_path %>
    </li>

    <li>
      <%= link_to t(".employees"), business_users_path %>
    </li>

    <% if policy(:schedule_preview).show? %>
      <li>
        <%= link_to t(".create_schedule"), scheduler_schedule_preview_path %>
      </li>
    <% end %>

    <% if policy(:settings).show? %>
      <li>
        <%= link_to t(".settings"), settings_path %>
      </li>
    <% end %>

    <li>
      <%= link_to t(".profile"), edit_user_path %>
    </li>

    <li>
      <%= link_to t(".logout"), destroy_user_session_path, method: :delete %>
    </li>
  </ul>
</div>
